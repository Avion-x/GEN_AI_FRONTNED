<div class="dashboard-page-wrapper">
    <!-- <div class="singleBoxRow">
        <div class="item" *ngFor="let item of widgetsTopSection">
            <div class="icon">
                <span class="material-symbols-rounded">router</span>
            </div>
            <div class="itemContent">
                <div class="title">{{item.title}}</div>
                <div class="itemCount">{{item.count}}</div>
            </div>            
        </div>
    </div> -->
    <div class="small-widgets-section" *ngIf="widgetsLoader">
        <div class="card small-widget mb-sm-0" *ngFor="let n of numSequence(8)">
        <div class="card-body">
            <span class="title">
                <p-skeleton  width="70%" height="1rem"></p-skeleton>
            </span>
            <div class="itemCount pt-10">
                <p-skeleton width="50px" height="2rem"></p-skeleton>
                <!-- <span class="f-14 f-w-600 font-primary"><i class="icon-arrow-up"></i><span>+50%</span></span> -->
            </div>
            <div class="bg-gradient">
                <p-skeleton shape="circle" size="50px"></p-skeleton>
            </div>
        </div>
        </div>
    </div>
    <div class="small-widgets-section" *ngIf="!widgetsLoader">
        <div class="card small-widget mb-sm-0" *ngFor="let item of widgetsTopSection" (click)="showWidgetDetails(item)">
            <div class="card-body">
                <span class="title">{{item.title}}</span>
                <div class="itemCount">
                    <h4>{{item.value}}</h4>
                    <!-- <span class="f-14 f-w-600 font-primary"><i class="icon-arrow-up"></i><span>+50%</span></span> -->
                </div>
                <div class="bg-gradient">
                    <span class="material-symbols-rounded icon">router</span>
                </div>
            </div>
        </div>
    </div>

    <div class="chart-section">
        <div class="card">
            <h5 class="title">Categories & Device count</h5>
            <p-chart type="bar" [data]="categoryStackedData" [options]="categoryStackedOptions"></p-chart>
        </div>
        <div class="card">
            <h5 class="title">Todays Test Results</h5>
            <p-chart type="bar" [data]="todaysTestData" [options]="basicOptions"></p-chart>
        </div>
    </div>
    <div class="chart-section">
        <!-- <div class="card">
            <h5 class="title">Todays Test Results</h5>
            <p-chart type="bar" [data]="todaysTestData" [options]="basicOptions"></p-chart>
        </div> -->
        <div class="card">
            <h5 class="title">Approved Test Cases</h5>
            <div class="pieChartHolder">
                <p-chart type="doughnut" [data]="approvedChartData" [options]="approvedChartOptions" [style]="{'width': '100%'}"></p-chart>
            </div>            
        </div>
    </div>
    
    
</div>

<p-sidebar [(visible)]="showSidebar"  class="sidebar-section gray-body no-footer" [style]="{width:'85vw'}" position="right">
    <ng-template pTemplate="header">
       {{selectedWidget}}
    </ng-template>
    <ng-template pTemplate="content">
    <div class="content-loader" *ngIf="widgetDetailsLoader">
        <i class="pi pi-spin pi-spinner"></i>
        <span>Loading {{selectedWidget}}...</span>
    </div>
                            
    <div class="table-container table-selection-list" *ngIf="!widgetDetailsLoader">
        <p-table #detailsTable class="selectableTable" [columns]="cols" [value]="moreDetailsTableData" 
        [globalFilterFields]="tableSearchKeys" [paginator]="true" [alwaysShowPaginator]="false" paginatorPosition="bottom" [rows]="10" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]">
            <ng-template pTemplate="caption">
                <div class="table-title-with-search">
                    <div class="title"> {{selectedWidget}}<div class="count">{{moreDetailsTableData.length}}</div></div>
                    <div class="right-section">   
                        <div class="search-box">
                            <i class="pi pi-search"></i>
                        <input pInputText type="text" #filter (input)="detailsTable.filterGlobal(filter.value, 'contains')" placeholder="Sub Category Search" />
                        </div>
                    </div>
                </div>                
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr>               
                    <td *ngFor="let col of columns">
                        {{rowData[col.field]}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    </ng-template>
</p-sidebar>